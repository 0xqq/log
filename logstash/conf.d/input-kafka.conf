input {
  if [type] == "log4j" {
    kafka {
      zk_connect => ['zk1:2181', 'zk2:2181']
      group_id => 'logcenter'
      topic_id => 'log4j'
      codec => json
      consumer_threads => 8
      queue_size => 2048
      decorate_events => true
      rebalance_max_retries => 8
      consumer_restart_sleep_ms => 100000
      consumer_restart_on_error => true
      tags => ["logcenter-kafka","log4j"]
      decorate_events => true
    }
  }

  if [type] == "log4php" {
    kafka {
      zk_connect => ['zk1:2181', 'zk2:2181']
      group_id => 'logcenter'
      topic_id => 'log4php'
      codec => json
      consumer_threads => 8
      queue_size => 2048
      decorate_events => true
      rebalance_max_retries => 8
      consumer_restart_sleep_ms => 100000
      consumer_restart_on_error => true
      tags => ["logcenter-kafka","log4php"]
      decorate_events => true
    }
  }
  if [type] == "sys_messsages" {
    kafka {
      zk_connect => ['zk1:2181', 'zk2:2181']
      group_id => 'logcenter'
      topic_id => 'sys_messsages'
      codec => json
      consumer_threads => 8
      queue_size => 2048
      decorate_events => true
      rebalance_max_retries => 8
      consumer_restart_sleep_ms => 100000
      consumer_restart_on_error => true
      tags => ["logcenter-kafka","sys_messsages"]
      decorate_events => true
    }
  }

  if [type] == "mysql_error" {
    kafka {
      zk_connect => ['zk1:2181', 'zk2:2181']
      group_id => 'logcenter'
      topic_id => 'mysql_error'
      codec => json
      consumer_threads => 8
      queue_size => 2048
      decorate_events => true
      rebalance_max_retries => 8
      consumer_restart_sleep_ms => 100000
      consumer_restart_on_error => true
      tags => ["logcenter-kafka","mysql_error"]
      decorate_events => true
    }
  }

  if [type] == "mysql_slow" {
    kafka {
      zk_connect => ['zk1:2181', 'zk2:2181']
      group_id => 'logcenter'
      topic_id => 'mysql_slow'
      codec => json
      consumer_threads => 8
      queue_size => 2048
      decorate_events => true
      rebalance_max_retries => 8
      consumer_restart_sleep_ms => 100000
      consumer_restart_on_error => true
      tags => ["logcenter-kafka","mysql_slow"]
      decorate_events => true
    }
  }

  if [type] == "nginx_error" {
      kafka {
        zk_connect => ['zk1:2181', 'zk2:2181']
        group_id => 'logcenter'
        topic_id => 'nginx_error'
        codec => json
        consumer_threads => 8
        queue_size => 2048
        decorate_events => true
        rebalance_max_retries => 8
        consumer_restart_sleep_ms => 100000
        consumer_restart_on_error => true
        tags => ["logcenter-kafka","nginx_error"]
        decorate_events => true
      }
    }

    if [type] == "php_error" {
      kafka {
        zk_connect => ['zk1:2181', 'zk2:2181']
        group_id => 'logcenter'
        topic_id => 'php_error'
        codec => json
        consumer_threads => 8
        queue_size => 2048
        decorate_events => true
        rebalance_max_retries => 8
        consumer_restart_sleep_ms => 100000
        consumer_restart_on_error => true
        tags => ["logcenter-kafka","php_error"]
        decorate_events => true
      }
    }

    if [type] == "php_slow" {
      kafka {
        zk_connect => ['zk1:2181', 'zk2:2181']
        group_id => 'logcenter'
        topic_id => 'php_slow'
        codec => json
        consumer_threads => 8
        queue_size => 2048
        decorate_events => true
        rebalance_max_retries => 8
        consumer_restart_sleep_ms => 100000
        consumer_restart_on_error => true
        tags => ["logcenter-kafka","php_slow"]
        decorate_events => true
      }
    }

    if [type] == "python_error" {
      kafka {
        zk_connect => ['zk1:2181', 'zk2:2181']
        group_id => 'logcenter'
        topic_id => 'python_error'
        codec => json
        consumer_threads => 8
        queue_size => 2048
        decorate_events => true
        rebalance_max_retries => 8
        consumer_restart_sleep_ms => 100000
        consumer_restart_on_error => true
        tags => ["logcenter-kafka","python_error"]
        decorate_events => true
      }
    }

    if [type] == "log4python" {
      kafka {
        zk_connect => ['zk1:2181', 'zk2:2181']
        group_id => 'logcenter'
        topic_id => 'log4python'
        codec => json
        consumer_threads => 8
        queue_size => 2048
        decorate_events => true
        rebalance_max_retries => 8
        consumer_restart_sleep_ms => 100000
        consumer_restart_on_error => true
        tags => ["logcenter-kafka"]
        decorate_events => true
      }
    }
}

input {
  if [type] == "nginx_access" {
    kafka {
      zk_connect => ['zk1:2181', 'zk2:2181']
      group_id => 'logcenter'
      topic_id => 'nginx_access'
      codec => json
      consumer_threads => 8
      queue_size => 2048
      decorate_events => true
      rebalance_max_retries => 8
      consumer_restart_sleep_ms => 100000
      consumer_restart_on_error => true
      tags => ["logcenter-kafka","nginx_access"]
      decorate_events => true
    }
  }
}